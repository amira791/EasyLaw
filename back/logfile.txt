Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
get All users Info 
User Sanaa_799 client login
User Sanaa_799 client logout  
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Payement_Validation\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\DELL\Desktop\2CS\S2\Projet\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
Watching for file changes with StatReloader
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Data_Collection\views.py changed, reloading.
Watching for file changes with StatReloader
Watching for file changes with StatReloader
get All users Info 
User USER client login
get All users Info 
User USER client login
User USER  get subscription
User USER  get invoice
User USER client logout  
get All users Info 
User USER client login
get All users Info 
User USER client login
User USER client logout  
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amine%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=amine%40gmail.com&limit=1 HTTP/1.1" 200 83
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_6M1aG2Yg9y2rmR message='Dashboard link for request'
message='Request to Stripe api' method=post url=https://api.stripe.com/v1/customers
api_version=2023-10-16 message='Post details' post_data=email=amine%40gmail.com&name=AMINE
https://api.stripe.com:443 "POST /v1/customers HTTP/1.1" 200 600
message='Stripe API response' path=https://api.stripe.com/v1/customers response_code=200
body='{\n  "id": "cus_Q9BbVkLGH0wb6s",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1716299985,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "amine@gmail.com",\n  "invoice_prefix": "B4D92177",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": null,\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {},\n  "name": "AMINE",\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_9EQpUFP7ZEHToe message='Dashboard link for request'
User AMINE  amine@gmail.com  create an account in stripe
http://localhost:8888 "POST /payment/customer HTTP/1.1" 201 43
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 29, in signup
    logger.info(f'User {user.username}  signed up as a client')
                        ^^^^
UnboundLocalError: cannot access local variable 'user' where it is not associated with a value
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amine%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=amine%40gmail.com&limit=1 HTTP/1.1" 200 799
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q9BbVkLGH0wb6s",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1716299985,\n      "currency": null,\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "amine@gmail.com",\n      "invoice_prefix": "B4D92177",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "AMINE",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_qW6qkXDJygpAnF message='Dashboard link for request'
User AMINE  amine@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122586
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 971, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 27, in signup
    data['stripeCustomerId'] = stripeCustomerId(data['username'], data['email'], request)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 132, in stripeCustomerId
    return response.json()["stripe_customer_id"]
           ^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 975, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amine%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=amine%40gmail.com&limit=1 HTTP/1.1" 200 799
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q9BbVkLGH0wb6s",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1716299985,\n      "currency": null,\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "amine@gmail.com",\n      "invoice_prefix": "B4D92177",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "AMINE",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_AdIrvmcHdoZZGe message='Dashboard link for request'
User AMINE  amine@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122586
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 971, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 27, in signup
    data['stripeCustomerId'] = stripeCustomerId(data['username'], data['email'], request)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 132, in stripeCustomerId
    return response.json()["stripe_customer_id"]
           ^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 975, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amine%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=amine%40gmail.com&limit=1 HTTP/1.1" 200 799
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q9BbVkLGH0wb6s",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1716299985,\n      "currency": null,\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "amine@gmail.com",\n      "invoice_prefix": "B4D92177",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "AMINE",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_nFlz7P8XXxBzuv message='Dashboard link for request'
User AMINE  amine@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122586
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 971, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 27, in signup
    data['stripeCustomerId'] = stripeCustomerId(data['username'], data['email'], request)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 132, in stripeCustomerId
    return response.json()["stripe_customer_id"]
           ^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 975, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
Watching for file changes with StatReloader
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amine%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=amine%40gmail.com&limit=1 HTTP/1.1" 200 799
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amine%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q9BbVkLGH0wb6s",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1716299985,\n      "currency": null,\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "amine@gmail.com",\n      "invoice_prefix": "B4D92177",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "AMINE",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_ngMDrcWrPqUAUe message='Dashboard link for request'
User AMINE  amine@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122586
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 971, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 27, in signup
    data['stripeCustomerId'] = stripeCustomerId(data['username'], data['email'], request)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 132, in stripeCustomerId
    return response.json()["stripe_customer_id"]
           ^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 975, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
Watching for file changes with StatReloader
get All users Info 
User USER client login
Starting new HTTP connection (1): localhost:9200
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.126s]
User USER client H    get_type_and_source of Juridical Text 
get All users Info 
User USER client login
User USER client logout  
Get All users 
get All users Info 
User DEMO admin login
User DEMO admin logout  
get All users Info 
User USER client login
get All users Info 
User USER client login
User USER client logout  
Unauthorized: /data_collection/index_page
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:4.115s]
Starting new HTTP connection (1): localhost:9200
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.119s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.025s]
get All users Info 
User USER client login
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.494s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.035s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.031s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:1.153s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.026s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.028s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.919s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.023s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.035s]
Watching for file changes with StatReloader
Watching for file changes with StatReloader
Starting new HTTP connection (1): localhost:9200
POST http://localhost:9200/juridical_texts/_search [status:N/A duration:4.070s]
Node <Urllib3HttpNode(http://localhost:9200)> has failed for 1 times in a row, putting on 1 second timeout
Retrying request after failure (attempt 0 of 3)
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elastic_transport\_transport.py", line 342, in perform_request
    resp = node.perform_request(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elastic_transport\_node\_http_urllib3.py", line 202, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x0000021C3AD50950>: Failed to establish a new connection: [WinError 10061] Aucune connexion na pu tre tablie car lordinateur cible la expressment refuse)
Starting new HTTP connection (2): localhost:9200
POST http://localhost:9200/juridical_texts/_search [status:N/A duration:4.085s]
Node <Urllib3HttpNode(http://localhost:9200)> has failed for 2 times in a row, putting on 2 second timeout
Retrying request after failure (attempt 1 of 3)
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elastic_transport\_transport.py", line 342, in perform_request
    resp = node.perform_request(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elastic_transport\_node\_http_urllib3.py", line 202, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x0000021C3AED4710>: Failed to establish a new connection: [WinError 10061] Aucune connexion na pu tre tablie car lordinateur cible la expressment refuse)
Resurrected node <Urllib3HttpNode(http://localhost:9200)> (force=False)
Starting new HTTP connection (3): localhost:9200
get All users Info 
User USER client login
POST http://localhost:9200/juridical_texts/_search [status:N/A duration:4.101s]
Node <Urllib3HttpNode(http://localhost:9200)> has failed for 3 times in a row, putting on 4 second timeout
Retrying request after failure (attempt 2 of 3)
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elastic_transport\_transport.py", line 342, in perform_request
    resp = node.perform_request(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elastic_transport\_node\_http_urllib3.py", line 202, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x0000021C3ADAD7C0>: Failed to establish a new connection: [WinError 10061] Aucune connexion na pu tre tablie car lordinateur cible la expressment refuse)
Resurrected node <Urllib3HttpNode(http://localhost:9200)> (force=False)
Starting new HTTP connection (4): localhost:9200
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 503 0
POST http://localhost:9200/juridical_texts/_search [status:503 duration:2.018s]
Node <Urllib3HttpNode(http://localhost:9200)> has failed for 4 times in a row, putting on 8 second timeout
Internal Server Error: /data_collection/index_page
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Data_Collection\views.py", line 190, in get
    results , len = lookup(query=query,sort_by=sort_by, source=source, year=year,searching_way=searching_way,
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Data_Collection\search.py", line 59, in lookup
    results = s.execute()
              ^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elasticsearch_dsl\_sync\search.py", line 77, in execute
    es.search(index=self._index, body=self.to_dict(), **self._params)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elasticsearch\_sync\client\utils.py", line 446, in wrapped
    return api(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elasticsearch\_sync\client\__init__.py", line 4091, in search
    return self.perform_request(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elasticsearch\_sync\client\_base.py", line 271, in perform_request
    response = self._perform_request(
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\elasticsearch\_sync\client\_base.py", line 352, in _perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.ApiError: ApiError(503, 'search_phase_execution_exception', None)
Resurrected node <Urllib3HttpNode(http://localhost:9200)> (force=False)
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.138s]
Node <Urllib3HttpNode(http://localhost:9200)> has been marked alive after a successful request
Resurrected node <Urllib3HttpNode(http://localhost:9200)> (force=False)
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.094s]
Starting new HTTP connection (1): localhost:9200
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.032s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.011s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.010s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.007s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.007s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.006s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.006s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.007s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.006s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:1.257s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.141s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.023s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.637s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.097s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.219s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.058s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.015s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.010s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.016s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.017s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.019s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.026s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.024s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.028s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.019s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.012s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.015s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.161s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.028s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.027s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.024s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.019s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.019s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.040s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.029s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.026s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.021s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.034s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.017s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.011s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.020s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.017s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.021s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.019s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.167s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.021s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.018s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.020s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.022s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.022s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.009s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.009s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.008s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.010s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.009s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.014s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.012s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.016s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.015s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.021s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.018s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.023s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.077s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.017s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.019s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.018s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.017s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.029s]
http://localhost:9200 "POST /juridical_texts/_search HTTP/1.1" 200 None
POST http://localhost:9200/juridical_texts/_search [status:200 duration:0.016s]
Watching for file changes with StatReloader
Watching for file changes with StatReloader
get All users Info 
User USER client login
User USER client logout  
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
get All users Info 
User USER client login
User USER client logout  
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amira%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amira%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amira%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amira%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=amira%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=amira%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=amira%40gmail.com&limit=1 HTTP/1.1" 200 801
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amira%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q6x115FHhrM06r",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1715784450,\n      "currency": "dzd",\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "amira@gmail.com",\n      "invoice_prefix": "E4B76D34",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "Amiraa",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_rVhxfJfcLqzDl9 message='Dashboard link for request'
User AM  amira@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122643
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 971, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 27, in signup
    data['stripeCustomerId'] = stripeCustomerId(data['username'], data['email'], request)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 131, in stripeCustomerId
    return response.json()["stripe_customer_id"]
           ^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 975, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
https://api.stripe.com:443 "GET /v1/customers?email=amira%40gmail.com&limit=1 HTTP/1.1" 200 801
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=amira%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q6x115FHhrM06r",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1715784450,\n      "currency": "dzd",\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "amira@gmail.com",\n      "invoice_prefix": "E4B76D34",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "Amiraa",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_ZmzWY0G16hlvIu message='Dashboard link for request'
User AM  amira@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122643
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Starting new HTTP connection (1): localhost:8888
Watching for file changes with StatReloader
C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py changed, reloading.
Watching for file changes with StatReloader
Starting new HTTP connection (1): localhost:8888
message='Request to Stripe api' method=get url=https://api.stripe.com/v1/customers?email=user%40gmail.com&limit=1
api_version=2023-10-16 message='Post details' post_data=email=user%40gmail.com&limit=1
Starting new HTTPS connection (1): api.stripe.com:443
https://api.stripe.com:443 "GET /v1/customers?email=user%40gmail.com&limit=1 HTTP/1.1" 200 801
message='Stripe API response' path=https://api.stripe.com/v1/customers?email=user%40gmail.com&limit=1 response_code=200
body='{\n  "object": "list",\n  "data": [\n    {\n      "id": "cus_Q6wzc7ggxHcgKk",\n      "object": "customer",\n      "address": null,\n      "balance": 0,\n      "created": 1715784351,\n      "currency": null,\n      "default_source": null,\n      "delinquent": false,\n      "description": null,\n      "discount": null,\n      "email": "user@gmail.com",\n      "invoice_prefix": "30614629",\n      "invoice_settings": {\n        "custom_fields": null,\n        "default_payment_method": null,\n        "footer": null,\n        "rendering_options": null\n      },\n      "livemode": false,\n      "metadata": {},\n      "name": "younes_a",\n      "phone": null,\n      "preferred_locales": [],\n      "shipping": null,\n      "tax_exempt": "none",\n      "test_clock": null\n    }\n  ],\n  "has_more": false,\n  "url": "/v1/customers"\n}' message='API response body'
link=https://dashboard.stripe.com/test/logs/req_lEWcGZxbGlOBwL message='Dashboard link for request'
User ggggg  user@gmail.com  has already an account 
Internal Server Error: /payment/customer
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 174, in __getattr__
    return self[k]
           ~~~~^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 216, in __getitem__
    raise err
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 204, in __getitem__
    return super(StripeObject, self).__getitem__(k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'stripeCustomerId'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\Payement_Validation\views.py", line 66, in addUser
    return Response({'stripe_customer_id': existing_customer.data[0].stripeCustomerId}, status=status.HTTP_200_OK)
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\stripe\_stripe_object.py", line 176, in __getattr__
    raise AttributeError(*err.args)
AttributeError: stripeCustomerId
http://localhost:8888 "POST /payment/customer HTTP/1.1" 500 122595
Internal Server Error: /user/signup
Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 971, in json
    return complexjson.loads(self.text, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\rest_framework\decorators.py", line 50, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 27, in signup
    data['stripeCustomerId'] = stripeCustomerId(data['username'], data['email'], request)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\User\views.py", line 131, in stripeCustomerId
    return response.json()["stripe_customer_id"]
           ^^^^^^^^^^^^^^^
  File "C:\Users\Manel\Desktop\2CS\S2\PROJET\TD\EasyLaw\back\venv\Lib\site-packages\requests\models.py", line 975, in json
    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)
requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
